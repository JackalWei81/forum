<h1>Forum's List</h1>

<%= link_to "New Topic", new_topic_path, :class => "btn btn-info" %>
排序：
<%= link_to "最後回覆時間", topics_path(:order => "updated_at")%>
<%= link_to "最多人回覆", topics_path(:order => "comments_count")%>
<%= link_to "最多瀏覽數", topics_path(:order => "views_count")%>

<%=  link_to "About", about_topics_path, :class => "btn btn-info pull-right" %>

<div>
  <%= form_tag topics_path, :method => :get do %>
    分類：
    <%= select_tag "Category", options_from_collection_for_select(Category.all, "id", "name"), :class => "form-control",:include_blank => "Please Select"   %>
    <%= submit_tag "Select" %>
  <% end %>
</div>

<table class="table">
  <tr>
    <td>
      <strong>標題</strong>
    </td>
    <td>
      <strong>分類</strong>
    </td>
    <td>
      <strong>作者</strong>
    </td>
    <td>
      <strong>回覆數</strong>
    </td>
    <td>
      <strong>瀏覽數</strong>
    </td>
    <td>
      <strong>最後回覆時間</strong>
    </td>
    <td>
    </td>
    <td>
    </td>
  </tr>
  <% @topics.each do |t| %>
  <tr>
      <td>
        <%= link_to t.name, topic_path(t) %>
      </td>
      <td>
        <% t.categories.each do |c| %>
          <%= c.name %>
        <% end %>
      </td>
      <td>
        <%= t.user.short_name%>
      </td>
      <td>
        <strong><%= t.comments.size%></strong>
      </td>
      <td>
        <strong><%= t.views_count %></strong>
      </td>
      <td>
        <%= t.updated_at.localtime %>
      </td>
      <% if user_signed_in? %>
        <td>
          <% if current_user.author?(t) %>
            <%= link_to "Edit", edit_topic_path(t), :class => "btn btn-primary" %>
          <% end %>
        </td>
        <td>
          <% if current_user.author?(t) %>
            <%= link_to "Delete", topic_path(t), :method => :delete, :data => {:confirm => "Are you sure?"}, :class => "btn btn-danger" %>
            <% end %>
        </td>
      <% end %>
  </tr>
  <% end %>
</table>
<%= paginate @topics, :theme => 'twitter-bootstrap-3' %>

  <script>
    $('#Category').select2();
  </script>